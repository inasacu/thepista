<%
	the_manager = nil
	request_image = ""
	request_link = ""

	item_link = ""
	item_image = ""
	
	the_label = ""
	four_spaces = ".&nbsp;&nbsp;&nbsp;&nbsp;"
	
	the_icon = ""

	case teammate.class.to_s
	when "Schedule"
		the_manager = teammate.group.all_the_managers.first
		request_image = item_image_link_small(the_manager)
		request_link = item_name_link(the_manager)

		item_link = item_concept_link(teammate)
		item_image = item_image_link_small(teammate.group)
		
		the_icon = schedule_image_link_small(teammate)
		
		is_member = current_user.is_member_of?(teammate.group)
		if teammate.played?
			the_label = %(#{I18n.t(:has_updated_scorecard) } #{the_label} #{is_member ? item_link : sanitize(teammate.concept)}.)
		else
			the_label = %(#{I18n.t(:created_a_schedule) } #{the_label} #{is_member ? item_link : sanitize(teammate.concept)}.)
		end

	when "Group", "Cup", "Challenge"
		the_manager = teammate.all_the_managers.first
		request_image = item_image_link_small(the_manager)
		request_link = item_name_link(the_manager)

		item_link = item_name_link(teammate)
		item_image = item_image_link_small(the_manager)

	when "Game"
		the_manager = teammate.cup.all_the_managers.first
		request_image = item_image_link_small(the_manager)
		request_link = item_name_link(the_manager)

		item_link = item_name_link(teammate.cup)
		item_image = item_image_link_small(teammate.cup)
		
		the_label = "#{label_name(:created_a_match)} <wbr/> #{item_link}"

	when "User"
		request_image = item_image_link_small(teammate)
		request_link = item_name_link(teammate)

		item_link = item_name_link(teammate)
		item_image = item_image_link_small(teammate)
		
		the_label = "#{label_name(:changed_description)}."
	
	when "Match"
		request_image = item_image_link_small(teammate.user)
		request_link = item_name_link(teammate.user)
		
		the_icon = schedule_image_link_roster(teammate.schedule)

        is_member = current_user.is_member_of?(teammate.schedule.group)
		the_label = %(#{I18n.t(:changes_in_roster_status) } #{I18n.t(:in) } 
					#{is_member ? team_roster_link(teammate.schedule) : sanitize(match.schedule.concept)}.)
			
    when "Comment"
		request_image = item_image_link_small(teammate.user)
		request_link = item_name_link(teammate.user)
		the_label = teammate.commentable_type

      	case teammate.commentable_type
      	when "Blog"
        	blog = teammate.commentable
			the_icon = comment_image_link_small(blog)
			
        	case blog.item_type
        	when "User"
            	the_label = %(#{I18n.t(:left_comment_on_wall)} 
								#{is_member ? blog_link_item(blog) : sanitize(blog.item.name)}.)
        	when "Group", "Challenge"
          		is_member = current_user.is_member_of?(blog.item)
          		the_label = %(#{I18n.t(:left_post_on_forum)} 
								#{is_member ? blog_link_item(blog) : sanitize(blog.item.name)}.)
        	end

		when "Forum"
		    forum = teammate.commentable
			the_icon = comment_image_link_small(forum)
			 
		    if forum.schedule        
		      is_member = current_user.is_member_of?(forum.schedule.group)        
		        the_label = %(#{I18n.t(:left_post_on_forum) } 
								#{is_member ? forum_link(forum): sanitize(forum.schedule.concept)}.)
		    end
	
		end
	end

	the_label = label_name(:"created_a_#{teammate.class.to_s.downcase}") + " <wbr/> #{item_link}" if the_label == ""
%>	
<tr>
	<td>
		<%= request_image %>
	</td>
	<td class="name_and_date">
		<%= request_link %>&nbsp;<%= the_label.downcase %>
		<span class="date">
			<%= the_icon %>&nbsp;&nbsp;<%= ago(teammate.created_at) %>	
		</span>
	</td>
	<td>&nbsp;</td>
	<td>&nbsp;</td>			  
	<td class="last">&nbsp;</td>	

</tr>






