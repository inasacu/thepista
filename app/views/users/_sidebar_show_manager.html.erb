<div class="block">
	<h3><%= label_name(:manager_option) %></h3>
<ul class="navigation">
<%
	current_user.groups.each do |group| 
		the_group = h(group.name)
		
		if @user == current_user and @user.is_creator_of?(group)  
			if @user.is_manager_of?(group)
				the_label = "#{ label_name(:role_remove_manager)} #{ label_name(:for) } #{the_group}"
				the_confirmation = "#{ label_name(:role_remove_manager)}, #{h(@user.name)} #{ label_name(:for) } #{the_group}?"
%>					
				<li><%= link_to(the_label , remove_manager_path(:id => @user, :group => group), :confirm => the_confirmation) %></li>
<% 
			else
				the_label = "#{ label_name(:role_add_manager)} #{ label_name(:from) } #{the_group}"
				the_confirmation = "#{ label_name(:role_add_manager)} #{ label_name(:to) } #{@user.name} #{ label_name(:to) } #{the_group}?"
%>		
				<li><%= link_to(the_label , set_manager_path(:id => @user, :group => group), :confirm => the_confirmation) %></li>		
<% 
			end 
		end
	
		if @user != current_user  and @user.is_member_of?(group) and current_user.is_creator_of?(group)
			if @user.is_manager_of?(group)
				the_label = "#{ label_name(:role_remove_manager)} #{ label_name(:from) } #{the_group}"
				the_confirmation = "#{ label_name(:role_remove_manager)} #{ label_name(:from) } #{the_group}?"
%>					
			<li><%= link_to(the_label , remove_manager_path(:id => @user, :group => group), :confirm => the_confirmation) %></li>		
<%
			else
				unless @user.is_manager_of?(group) and group.total_managers.to_i <= 2
				the_label = "#{ label_name(:role_add_manager)} #{ label_name(:for) } #{the_group}"
				the_confirmation = "#{ label_name(:role_add_manager)} #{ label_name(:for) } #{the_group}?"
%>		
					<li><%= link_to(the_label , set_manager_path(:id => @user, :group => group), :confirm => the_confirmation) %></li>
<% 
				end
			end		
		end	
	end 
%>

</ul>
	
</div>