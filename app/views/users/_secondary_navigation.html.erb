<div class="secondary-navigation">
<ul>

<%
	the_label = "" 
	my_openid = false

	user_access = ['login','logout','signup']
	control_path = ['users', 'user_sessions'] 

	the_controller = controller.controller_name
	the_action = controller.action_name
	
	controls = ['blogs', 'entries', 'comments'] 
	actions = ['show','edit','third_party', 'recent_activity']
	the_user = (@user ? @user : current_user)
%>
	<li class="<%= get_first_active %>">  <%= link_to(control_label('teammate'), users_url) %></li>
	<li class="<%= get_active('user_list') %>"><%=  link_to(label_name(:all_user) , list_users_path) %></li>
	<li class="<%= get_active('third_party') %>"><%= link_to(t(:myopenid) , third_party_url(:id => the_user.id)) if the_user == current_user %></li>
<%
	unless actions.include?(the_action) or controls.include?(the_controller) 
		the_label = control_label('my_wall')
%>
		<li class="<%= get_active('entry_show') %>">  <%= link_to(the_label, blog_path(current_user.blog)) %></li>
<% 		
	else 
		the_label = (@user == current_user ? control_label('my_wall') : label_with_name('the_wall', h(@user.name)))	
%>
		<li class="<%= get_active('entry_show') %>">  <%= link_to(the_label, blog_path(@user.blog)) %></li>
<% 
	end
%>
	<li class="<%= get_active('user_show') %>"><%= user_link(label_name(:profile), the_user) %></li>
	<% if current_user.has_pending_petition?(current_user) %>
	<li class="<%= get_active('user_petition') %>">
		<%= link_to(label_name(:petitions), petition_path(current_user)) %>
	</li>
	<% end %>
</ul>
<div class="clear"></div>
</div>