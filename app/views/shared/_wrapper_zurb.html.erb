<% 
	# login options
	login_action = ['signup', 'create', 'new', 'rpx_create', 'rpx_new'] 
	login_controller =['user_sessions', 'users', ''] 
	login_session = (login_controller.include?(controller.controller_name) and login_action.include?(controller.action_name)) 
	logout =  !current_user and is_controller('home') and is_action('index') 

	the_controller = get_the_controller
	the_sidebar = "#{the_controller}s"
	the_sidebar_label = label_name(:options)
	new_item_sidebar = nil
	
	is_controller_index = is_action('index')
	
	case the_controller
	when 'home'
		the_sidebar = "#{get_the_controller}"
		the_sidebar_label = label_name(:get_up_and_running)
		
	when 'match'
		the_sidebar = "schedules"
		
	when 'fee', 'payment'
		the_sidebar = "users" if @user
		the_sidebar = "groups" if @group
		the_sidebar = "challenges" if @challenge
		the_sidebar = "venues" if @venue
		
	when 'scorecard'	
		the_sidebar = "groups"	
		
	when 'invitation'
		the_sidebar = 'messages'	
	
	when 'escuadra'
		the_sidebar = 'cups'
	
	when 'standing'
		the_sidebar = 'cups'
		the_sidebar = 'challenges' if get_controller_action == 'standing_show_list'
		
	when 'challenge'
		the_sidebar = 'challenges'
		
	when 'cast'
		the_sidebar = 'challenges'
		the_sidebar = 'cups' if get_controller_action == 'cast_list_gues'
	
	when 'game'
		the_sidebar = nil		
		the_sidebar = 'cups' if get_controller_action == 'game_index' or get_controller_action == 'game_list'
		
	when 'message'
		new_item_sidebar = Message.new
		
	when 'cup'
		new_item_sidebar = Cup.new	
		the_sidebar = nil if is_controller_action('cup_index')
	
	when 'group'
		ignore_option = ['group_show', 'group_team_list']
		new_item_sidebar = Group.new unless ignore_option.include?(get_controller_action)

	
	when 'schedule'
		ignore_option = ['schedule_show', 'schedule_team_roster', 'schedule_team_no_show', 'schedule_team_last_minute', 'schedule_team_unavailable']
		new_item_sidebar = Schedule.new unless ignore_option.include?(get_controller_action)
	
	when 'venue'	
		if the_maximo
			ignore_option = ['venue_show']
			new_item_sidebar = Venue.new unless ignore_option.include?(get_controller_action)
		else
			the_sidebar = nil
		end
	end
	
	ignore_sidebar = ['new','create', 'edit', 'update']
	the_sidebar = nil if ignore_sidebar.include?(get_the_action)
	
	
	# case for pagination display
	# if get_controller_action == 'group_team_list'
	# 	@the_collection = @users if @users
	# end

	if get_controller_action == 'group_list' or get_controller_action == 'group_index'
		@the_collection = @groups if @groups
	end

	if get_controller_action == 'schedule_list' or get_controller_action == 'schedule_index'
		@the_collection = @schedules if @schedules
	end

	if get_controller_action == 'cup_index'
		@the_collection = @cups if @cups
	end

	if get_controller_action == 'escuadra_index'
		@the_collection = @escuadras if @escuadras
	end	

	if get_controller_action == 'game_index'
		@the_collection = @games if @games
	end	
	
	if get_controller_action == 'message_index'
		@the_collection = @messages if @messages
	end

	if get_controller_action == 'venue_index'
		@the_collection = @venues if @venues
	end

	the_controller_action = ['cast_index', 'challenge_challenge_list','cast_list', 'cast_list_guess_user', 'cast_list_gues']
	if the_controller_action.include?(get_controller_action)
		@the_collection = @casts if @casts
	end
	
	# :collection => @challenges if @challenges 
	# :collection => @cups if @cups 
	# :collection => @games if @games 
	# :collection => @invitation if @invitation 
	# :collection => @markers if @markers 
	# :collection => @role if @role 
	# :collection => @schedules if @schedules 
	# :collection => @sport if @sport 
	# :collection => @venues if @venues 
	
	
	# case for discard displaying DISQUS
	discard_disqus_display = ['schedule_new', 'schedule_edit', 'cast_edit', 'match_edit', 'invitation_new', 'challenge_new', 'challenge_edit', 'message_new']
	
	# case for displaying SIDEBAR 
	ignore_sidebar = ['schedule_list', 'user_index', 'invitation_new', 'challenge_new', 'challenge_create', 'message_index', 'message_show', 'message_new', 
					  'game_index', 'standing_index', 'game_list','cast_list_gues','standing_show_all', 'home_about', 'home_terms_of_use', 'home_faq', 'standing_show', 'home_persona',
					  'reservation_index', 'user_session_new', 'authentication_index']
					
	the_sidebar = nil if ignore_sidebar.include?(get_controller_action)
	
	the_column_set = is_controller_action('reservation_index') ? "twelve columns" : nil
%>


<div class="row">

	<div class="<%= eight_twelve_columns(the_column_set) %>">
		
		
		<%= yield %>

		<%= render 'shared/pagination_zurb', :collection => @the_collection if @the_collection %>

		
		<% unless discard_disqus_display.include?(get_controller_action) %>
				
			<%= render 'utilities/disqus_display', :the_item => @schedule if @schedule %>
			<%= render 'utilities/disqus_display', :the_item => @challenge if @challenge %>
		
		<% end %>
				
		
	</div>


<% if current_user %>


	<% if  is_mobile_browser %>
	
		<br>
		<hr/>		
		<br>
	
	<% end %>
	
	<% if is_mobile_browser %>
	<div class="row">
		<div class="one columns"></div>
		<div class="eleven columns">

		<table>
		<tbody>
		<tr>
		<td>

	<% end %>
	
	
	
	  	<div class="four columns">
		<!-- SIDEBAR BEGIN -->
				
			<% unless the_sidebar.nil? %>
		
				<%= set_title_class(the_sidebar_label) %>
				<hr/>
				
				<%= render 'sidebars/sidebar_create_zurb', :item => new_item_sidebar unless new_item_sidebar.nil? %>	
			
				<%= render 'sidebars/sidebar_message' %>
				
				<%= render "#{the_sidebar}/sidebar_zurb" %>	
		
				<hr/>
				<br/>		
		
			<% end %>
		
		<!-- SIDEBAR END -->
	  	</div> 

		<% if is_mobile_browser %>
		</td>
		</tr>
		</tbody>
		</table>
		
		</div>
		</div>
		<% end %>
	

<% end -%>


</div>

