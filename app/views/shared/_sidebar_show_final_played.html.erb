<% 
	final_played ||= false
	the_game = Game.final_game(@cup)
	final_played = the_game.played unless (the_game.nil? or the_game.blank?)

	unless final_played 
%>
		<% if @cup.official %>
			<% unless is_current_manager_of(@cup) -%>
				<% content_for :sidebar, render("cups/sidebar_show", :cup => @cup) %>
				<% content_for :sidebar, render(:partial => 'challenges/sidebar_legend') -%>
			<% end %>
		<% else 
			@item = @cup 
			the_groups = []
			current_user.groups.each {|group| the_groups << group if is_current_manager_of(group)}		
		%>
			<% content_for :sidebar, render("shared/sidebar_show_item", :cup => @cup, :items => the_groups) %>
		<% end -%>	
<% 
	end 
%>
<% content_for :sidebar, render(:partial => 'shared/sidebar_show_cup', :locals => {:cup => @cup}) if is_current_manager_of(@cup) -%>