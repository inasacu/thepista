
<style>
body{
	text-align:center;
}
</style>

<script type="text/javascript">
$(function(){
	

	$('#test1').gmap3(

		{ action: 'addMarker',
		latLng: [40.4855346857, -3.7153476477],
		map:{
			center: true,
			zoom: 14
		},
		marker:{
			options:{
				draggable:true
			},
			events:{
				dragend: function(marker){
					$(this).gmap3({
						action:'getAddress',
						latLng:marker.getPosition(),
						callback:function(results){
							var map = $(this).gmap3('get'),
							infowindow = $(this).gmap3({action:'get', name:'infowindow'}),
							content = results && results[1] ? results && results[1].formatted_address : 'no address';
							if (infowindow){
								infowindow.open(map, marker);
								infowindow.setContent(content);
							} else {
								$(this).gmap3({action:'addinfowindow', anchor:marker, options:{content: content}});
							}
						}
					});
				}
			}
		}
	}
	
	
			
	//  get user geo location  
	,{ action : 'geoLatLng',
		callback : function(latLng){
			if (latLng){
				$(this).gmap3({
					action: 'addMarker', 
					latLng:latLng		
				},
				"autofit");
			} else {
				$('#googleMap-result').html('not localised !');
			}
		}
	}
	
	
	
	
	
	
	
);
});
</script>

	<div id="test1" class="gmap3"></div>
	drag & drop the marker to see the address

